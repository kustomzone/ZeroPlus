
<!-- Right Sidebar -->
<div id="sidebar" class="container">
		<div class="title">
			<h2>流行</h2>
		</div>
		<ul class="list">
		  {{ #topic }}
			  <span class="showtopics">
				 <a href="?Topic:{{ topic_id }}" id="open_topic" data-key="{{ topic_id }}">{{ title }}</a>
			     <div id="topic{{ topic_id }}"></div>
				 <script>
				  var thumb = "{{ image_thumb }}";
				  thumb = decodeString(thumb); // image_thumb (blob) is getting encoded. bug (text/blob?)
				  if (thumb.substring(0, 4) === "data" && !($("#topic" + {{ topic_id }} ).children('#new_image').length)) {
					var img = $("<img id='new_image'>"); // create img
					img.attr("src", thumb);
					img.attr("style", "position: relative; left: 11px; width: 100px; height: 100px; border: 1px solid #302010;");
					img.appendTo($("#topic{{ topic_id }}"));
				  }
				  // encode special characters
				  function encodeString(str) {
					return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\//g, '&#x2F;').replace(/=/g, '&#x3D;');
				  }
				  // decode special characters
				  function decodeString(str) {
					return str.replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"').replace(/&#x27;/g, '\'').replace(/&#x2F;/g, '/').replace(/&#x3D;/g, '=');
				  }
				 </script>
			  </span>
		  {{ /topic }}			
		</ul>
		<div class="showmore">
			<a href="#more">More</a>
		</div>
	</div>
<!-- /Right Sidebar -->
